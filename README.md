# express-access-log-middleware

An access and error logger for express based on [pino-http](https://github.com/pinojs/pino-http).

## API documentation
Check the autogenerated documentation [here](https://mapcolonies.github.io/express-access-log-middleware/).

## Usage

```typescript
import * as express from 'express';
import jsLogger from '@map-colonies/js-logger';
import httpLogger from '@map-colonies/express-access-log-middleware';

const app = express()

const logger = jsLogger();

app.use(httpLogger({logger}));

app.get('/', (req,res) => {
  res.json({hello: 'world'});
});

app.listen(8080);
```

for more detailed usage check the [pino-http documentation](https://github.com/pinojs/pino-http).

###

## Configuration
| name | type | default value | description |
|---|---|---|---|
| logger | Logger | required | The logger instance used for logging requests and responses |
| ignorePaths | (string \| RegExp)[] | undefined | Array of paths or regular expressions to ignore from logging |
| ignore | AutoLoggingOptions['ignore'] | undefined | Custom ignore options for automatic logging |
| customLogLevel | (req, res, err) => LogLevel | error for >=400, info otherwise | Custom function to determine log level based on request, response and error |
| customSuccessMessage | (res: ServerResponse) => string | undefined | Custom function to generate success messages |
| customSuccessObject | (req: IncomingMessage, res: ServerResponse, val: any) => object | undefined | Custom function to modify the success log object |
| customErrorMessage | (error: Error, res: ServerResponse) => string | undefined | Custom function to generate error messages |
| customErrorObject | (req: IncomingMessage, res: ServerResponse, error: Error) => object | undefined | Custom function to modify the error log object |


